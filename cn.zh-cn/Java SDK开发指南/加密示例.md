# 加密示例<a name="obs_21_1903"></a>

>![](public_sys-resources/icon-notice.gif) **须知：** 
>开发过程中，您有任何问题可以在github上[提交issue](https://github.com/huaweicloud/huaweicloud-sdk-java-obs/issues)，或者在[华为云对象存储服务论坛](https://bbs.huaweicloud.com/forum/forum-620-1.html)中发帖求助。[接口参考文档](https://obssdk.obs.cn-north-1.myhuaweicloud.com/apidoc/cn/java/index.html)详细介绍了每个接口的参数和使用方法。

## 上传对象加密<a name="section14263193123819"></a>

以下代码展示了在上传对象时使用SSE-C方式进行服务端加密。

设置SSE-C方式下使用的密钥，请参考[如何生成SSE-C方式的加密秘钥](https://support.huaweicloud.com/sdk-java-devg-obs/obs_21_2119.html)

更多关于服务端加密的内容请参考[服务端加密SSE-C方式](https://support.huaweicloud.com/api-obs/obs_04_0107.html)。

```
// Endpoint以北京四为例，其他地区请按实际情况填写。
String endPoint = "https://obs.cn-north-4.myhuaweicloud.com";
String ak = "*** Provide your Access Key ***";
String sk = "*** Provide your Secret Key ***";
// 创建ObsClient实例
ObsClient obsClient = new ObsClient(ak, sk, endPoint);

PutObjectRequest request = new PutObjectRequest();
request.setBucketName("bucketname");
request.setObjectKey("objectname");
request.setFile(new File("localfile"));
// 设置SSE-C算法加密对象
SseCHeader sseCHeader = new SseCHeader();
sseCHeader.setAlgorithm(ServerAlgorithm.AES256);
// 设置SSE-C方式下使用的密钥，用于加解密对象，该值是密钥进行base64encode后的值
sseCHeader.setSseCKeyBase64("your base64 sse-c key generated by AES-256 algorithm");

request.setSseCHeader(sseCHeader);
obsClient.putObject(request);
```

## 下载对象解密<a name="section0652153633818"></a>

以下代码展示了在下载对象时使用SSE-C方式进行服务端解密：

```
// Endpoint以北京四为例，其他地区请按实际情况填写。
String endPoint = "https://obs.cn-north-4.myhuaweicloud.com";
String ak = "*** Provide your Access Key ***";
String sk = "*** Provide your Secret Key ***";
// 创建ObsClient实例
ObsClient obsClient = new ObsClient(ak, sk, endPoint);

GetObjectRequest request = new GetObjectRequest("bucketname", "objectname");
// 设置SSE-C算法解密对象
SseCHeader sseCHeader = new SseCHeader();
sseCHeader.setAlgorithm(ServerAlgorithm.AES256);
// 此处的密钥必须和上传对象加密时使用的密钥一致
sseCHeader.setSseCKeyBase64("your base64 sse-c key generated by AES-256 algorithm");

request.setSseCHeader(sseCHeader);
ObsObject obsObject = obsClient.getObject(request);

obsObject.getObjectContent().close();
```

>![](public_sys-resources/icon-note.gif) **说明：** 
>-   加密秘钥的计算方式，可以参考章节：[如何生成SSE-C方式的加密秘钥](如何生成SSE-C方式的加密秘钥.md)。

