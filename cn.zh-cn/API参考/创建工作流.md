# 创建工作流<a name="obs_04_0122"></a>

## 功能介绍<a name="section583694617498"></a>

本接口用于直接创建Data+工作流。

## 请求消息样式<a name="section51167945152946"></a>

```
POST /v2/workflows/{graph_name}?x-workflow-create HTTP/1.1
Host: obs.cn-north-4.myhuaweicloud.com 
Authorization: authorization
Content-Type: application/json
Content-Length: length
Date: date

policy json body
```

## 请求消息参数<a name="section1298623631616"></a>

**表 1**  请求消息参数

<a name="table188021564417"></a>
<table><thead align="left"><tr id="row4801315134419"><th class="cellrowborder" valign="top" width="16.02%" id="mcps1.2.6.1.1"><p id="p1380615134419"><a name="p1380615134419"></a><a name="p1380615134419"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="9.2%" id="mcps1.2.6.1.2"><p id="p180171534412"><a name="p180171534412"></a><a name="p180171534412"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="14.09%" id="mcps1.2.6.1.3"><p id="p15806151444"><a name="p15806151444"></a><a name="p15806151444"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="21.42%" id="mcps1.2.6.1.4"><p id="p208111518446"><a name="p208111518446"></a><a name="p208111518446"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="39.269999999999996%" id="mcps1.2.6.1.5"><p id="p88116159440"><a name="p88116159440"></a><a name="p88116159440"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row68111519448"><td class="cellrowborder" valign="top" width="16.02%" headers="mcps1.2.6.1.1 "><p id="p1181151544418"><a name="p1181151544418"></a><a name="p1181151544418"></a>graph_name</p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p28131504413"><a name="p28131504413"></a><a name="p28131504413"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="14.09%" headers="mcps1.2.6.1.3 "><p id="p11811415144415"><a name="p11811415144415"></a><a name="p11811415144415"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="21.42%" headers="mcps1.2.6.1.4 "><p id="p68171520442"><a name="p68171520442"></a><a name="p68171520442"></a>工作流名称</p>
</td>
<td class="cellrowborder" valign="top" width="39.269999999999996%" headers="mcps1.2.6.1.5 "><p id="p1281121574417"><a name="p1281121574417"></a><a name="p1281121574417"></a>名称必须以字母或数字开头，只能由字母、数字、下划线和中划线组成，长度小于等于64个字符，且不能重名。</p>
</td>
</tr>
</tbody>
</table>

## 请求消息头<a name="section16227023104816"></a>

该请求使用公共消息头，具体参见[表3](构造请求.md#table25197309)。

## 请求消息元素<a name="section1327516527356"></a>

**表 2**  参数说明

<a name="table138494234514"></a>
<table><thead align="left"><tr id="row18849182154514"><th class="cellrowborder" valign="top" width="12.55%" id="mcps1.2.6.1.1"><p id="p984922184512"><a name="p984922184512"></a><a name="p984922184512"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="11.33%" id="mcps1.2.6.1.2"><p id="p5849132164512"><a name="p5849132164512"></a><a name="p5849132164512"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.42%" id="mcps1.2.6.1.3"><p id="p1685042144510"><a name="p1685042144510"></a><a name="p1685042144510"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="24.63%" id="mcps1.2.6.1.4"><p id="p148501926457"><a name="p148501926457"></a><a name="p148501926457"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="36.07%" id="mcps1.2.6.1.5"><p id="p9850102174515"><a name="p9850102174515"></a><a name="p9850102174515"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row88503213458"><td class="cellrowborder" valign="top" width="12.55%" headers="mcps1.2.6.1.1 "><p id="p885052114512"><a name="p885052114512"></a><a name="p885052114512"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="11.33%" headers="mcps1.2.6.1.2 "><p id="p8850162184510"><a name="p8850162184510"></a><a name="p8850162184510"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.42%" headers="mcps1.2.6.1.3 "><p id="p3850102144520"><a name="p3850102144520"></a><a name="p3850102144520"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="24.63%" headers="mcps1.2.6.1.4 "><p id="p585012224514"><a name="p585012224514"></a><a name="p585012224514"></a>工作流的描述</p>
</td>
<td class="cellrowborder" valign="top" width="36.07%" headers="mcps1.2.6.1.5 "><p id="p118505217452"><a name="p118505217452"></a><a name="p118505217452"></a>长度最小为0，最长为256，可以是数字、大小写字母以及英文的逗号，句号，冒号，中划线，下划线，空格。</p>
</td>
</tr>
<tr id="row285019218456"><td class="cellrowborder" valign="top" width="12.55%" headers="mcps1.2.6.1.1 "><p id="p11850202134520"><a name="p11850202134520"></a><a name="p11850202134520"></a>states</p>
</td>
<td class="cellrowborder" valign="top" width="11.33%" headers="mcps1.2.6.1.2 "><p id="p6850222457"><a name="p6850222457"></a><a name="p6850222457"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.42%" headers="mcps1.2.6.1.3 "><p id="p1585019216456"><a name="p1585019216456"></a><a name="p1585019216456"></a>Array of <a href="#table7850142134511">State</a></p>
</td>
<td class="cellrowborder" valign="top" width="24.63%" headers="mcps1.2.6.1.4 "><p id="p168501529457"><a name="p168501529457"></a><a name="p168501529457"></a>工作流的编排定义</p>
</td>
<td class="cellrowborder" valign="top" width="36.07%" headers="mcps1.2.6.1.5 "><a name="ul188504211450"></a><a name="ul188504211450"></a><ul id="ul188504211450"><li>必须有TYPE，TYPE值必须是3种State（DELAY，OPERATION，END）中一种。</li><li>每个state的名字是1-80长度的只含数字，字母，-和_的String。</li></ul>
</td>
</tr>
<tr id="row4850112174520"><td class="cellrowborder" valign="top" width="12.55%" headers="mcps1.2.6.1.1 "><p id="p4850122144517"><a name="p4850122144517"></a><a name="p4850122144517"></a>inputs</p>
</td>
<td class="cellrowborder" valign="top" width="11.33%" headers="mcps1.2.6.1.2 "><p id="p585012211453"><a name="p585012211453"></a><a name="p585012211453"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.42%" headers="mcps1.2.6.1.3 "><p id="p1885010264513"><a name="p1885010264513"></a><a name="p1885010264513"></a>Array of <a href="#table285619212450">Input</a></p>
</td>
<td class="cellrowborder" valign="top" width="24.63%" headers="mcps1.2.6.1.4 "><p id="p3850102194518"><a name="p3850102194518"></a><a name="p3850102194518"></a>工作流中用户可修改参数列表</p>
</td>
<td class="cellrowborder" valign="top" width="36.07%" headers="mcps1.2.6.1.5 "><p id="p48501028451"><a name="p48501028451"></a><a name="p48501028451"></a>-</p>
</td>
</tr>
</tbody>
</table>

**表 3**  State公共域说明

<a name="table7850142134511"></a>
<table><thead align="left"><tr id="row885042104517"><th class="cellrowborder" valign="top" width="17.82%" id="mcps1.2.6.1.1"><p id="p485010218453"><a name="p485010218453"></a><a name="p485010218453"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="9.45%" id="mcps1.2.6.1.2"><p id="p0850325452"><a name="p0850325452"></a><a name="p0850325452"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="8.51%" id="mcps1.2.6.1.3"><p id="p785012217454"><a name="p785012217454"></a><a name="p785012217454"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.64%" id="mcps1.2.6.1.4"><p id="p1985015214511"><a name="p1985015214511"></a><a name="p1985015214511"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="30.580000000000002%" id="mcps1.2.6.1.5"><p id="p385052174511"><a name="p385052174511"></a><a name="p385052174511"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row1585016224515"><td class="cellrowborder" valign="top" width="17.82%" headers="mcps1.2.6.1.1 "><p id="p2850202184516"><a name="p2850202184516"></a><a name="p2850202184516"></a>start</p>
</td>
<td class="cellrowborder" valign="top" width="9.45%" headers="mcps1.2.6.1.2 "><p id="p168500214451"><a name="p168500214451"></a><a name="p168500214451"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="8.51%" headers="mcps1.2.6.1.3 "><p id="p385013224519"><a name="p385013224519"></a><a name="p385013224519"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="33.64%" headers="mcps1.2.6.1.4 "><p id="p885016219458"><a name="p885016219458"></a><a name="p885016219458"></a><span>标识开始的state，图中必须且只有一个start为true的state。</span></p>
</td>
<td class="cellrowborder" valign="top" width="30.580000000000002%" headers="mcps1.2.6.1.5 "><p id="p485082164512"><a name="p485082164512"></a><a name="p485082164512"></a>有且只有一个start为true的state。</p>
</td>
</tr>
<tr id="row1285032104510"><td class="cellrowborder" valign="top" width="17.82%" headers="mcps1.2.6.1.1 "><p id="p58502224517"><a name="p58502224517"></a><a name="p58502224517"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="9.45%" headers="mcps1.2.6.1.2 "><p id="p168507254511"><a name="p168507254511"></a><a name="p168507254511"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="8.51%" headers="mcps1.2.6.1.3 "><p id="p198503224515"><a name="p198503224515"></a><a name="p198503224515"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.64%" headers="mcps1.2.6.1.4 "><p id="p16850142144513"><a name="p16850142144513"></a><a name="p16850142144513"></a><span>DELAY、OPERATION</span>、<span>END</span></p>
</td>
<td class="cellrowborder" valign="top" width="30.580000000000002%" headers="mcps1.2.6.1.5 "><p id="p198501221453"><a name="p198501221453"></a><a name="p198501221453"></a>枚举类型。</p>
</td>
</tr>
<tr id="row108509211453"><td class="cellrowborder" valign="top" width="17.82%" headers="mcps1.2.6.1.1 "><p id="p118508204510"><a name="p118508204510"></a><a name="p118508204510"></a><span>payload_filter_in</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.45%" headers="mcps1.2.6.1.2 "><p id="p168508216457"><a name="p168508216457"></a><a name="p168508216457"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="8.51%" headers="mcps1.2.6.1.3 "><p id="p485182144513"><a name="p485182144513"></a><a name="p485182144513"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.64%" headers="mcps1.2.6.1.4 "><p id="p16851122144520"><a name="p16851122144520"></a><a name="p16851122144520"></a>过滤输入参数，默认值是"$"，表示不过滤。</p>
</td>
<td class="cellrowborder" valign="top" width="30.580000000000002%" headers="mcps1.2.6.1.5 "><p id="p1985117211459"><a name="p1985117211459"></a><a name="p1985117211459"></a>必须是合法的JSONPath格式。</p>
<div class="note" id="note9851722458"><a name="note9851722458"></a><a name="note9851722458"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p17851927455"><a name="p17851927455"></a><a name="p17851927455"></a><span>END</span> State没有<span>payload_filter_in</span>属性。</p>
</div></div>
</td>
</tr>
<tr id="row48511827455"><td class="cellrowborder" valign="top" width="17.82%" headers="mcps1.2.6.1.1 "><p id="p1185182134515"><a name="p1185182134515"></a><a name="p1185182134515"></a><span>payload_filter_out</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.45%" headers="mcps1.2.6.1.2 "><p id="p188511429454"><a name="p188511429454"></a><a name="p188511429454"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="8.51%" headers="mcps1.2.6.1.3 "><p id="p685115284519"><a name="p685115284519"></a><a name="p685115284519"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.64%" headers="mcps1.2.6.1.4 "><p id="p48511325457"><a name="p48511325457"></a><a name="p48511325457"></a>过滤state的输出结果，默认值是"$"，表示不过滤。</p>
</td>
<td class="cellrowborder" valign="top" width="30.580000000000002%" headers="mcps1.2.6.1.5 "><p id="p985115244514"><a name="p985115244514"></a><a name="p985115244514"></a>必须是合法的JSONPath格式。</p>
<div class="note" id="note78512244514"><a name="note78512244514"></a><a name="note78512244514"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p108512211458"><a name="p108512211458"></a><a name="p108512211458"></a><span>END</span> State没有<span>payload_filter_out</span>属性。</p>
</div></div>
</td>
</tr>
<tr id="row7851152164515"><td class="cellrowborder" valign="top" width="17.82%" headers="mcps1.2.6.1.1 "><p id="p158513217459"><a name="p158513217459"></a><a name="p158513217459"></a>state_name</p>
</td>
<td class="cellrowborder" valign="top" width="9.45%" headers="mcps1.2.6.1.2 "><p id="p11851125459"><a name="p11851125459"></a><a name="p11851125459"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="8.51%" headers="mcps1.2.6.1.3 "><p id="p1685172174514"><a name="p1685172174514"></a><a name="p1685172174514"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.64%" headers="mcps1.2.6.1.4 "><p id="p1585115210456"><a name="p1585115210456"></a><a name="p1585115210456"></a>state的名字定义。</p>
</td>
<td class="cellrowborder" valign="top" width="30.580000000000002%" headers="mcps1.2.6.1.5 "><p id="p585119234513"><a name="p585119234513"></a><a name="p585119234513"></a>由小写字母、数字和中划线“-”组成，长度为[1, 20]。</p>
</td>
</tr>
</tbody>
</table>

**表 4**  OperationState结构体参数说明

<a name="table785116204515"></a>
<table><thead align="left"><tr id="row18851324455"><th class="cellrowborder" valign="top" width="16.39%" id="mcps1.2.6.1.1"><p id="p1285122184515"><a name="p1285122184515"></a><a name="p1285122184515"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="7.1499999999999995%" id="mcps1.2.6.1.2"><p id="p118519216458"><a name="p118519216458"></a><a name="p118519216458"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.82%" id="mcps1.2.6.1.3"><p id="p17851152104514"><a name="p17851152104514"></a><a name="p17851152104514"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="41.06%" id="mcps1.2.6.1.4"><p id="p48511721452"><a name="p48511721452"></a><a name="p48511721452"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="22.58%" id="mcps1.2.6.1.5"><p id="p148513294517"><a name="p148513294517"></a><a name="p148513294517"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row138511219458"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p1885114218451"><a name="p1885114218451"></a><a name="p1885114218451"></a>action_mode</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p58518218450"><a name="p58518218450"></a><a name="p58518218450"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p185120204517"><a name="p185120204517"></a><a name="p185120204517"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="41.06%" headers="mcps1.2.6.1.4 "><p id="p1785172134519"><a name="p1785172134519"></a><a name="p1785172134519"></a><span>任务action调用的模式，并行或者串行。默认值是“SEQUENTIAL”。</span></p>
</td>
<td class="cellrowborder" valign="top" width="22.58%" headers="mcps1.2.6.1.5 "><p id="p2851132154520"><a name="p2851132154520"></a><a name="p2851132154520"></a><span>只支持“SEQUENTIAL”。</span></p>
</td>
</tr>
<tr id="row13851828451"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p128518294517"><a name="p128518294517"></a><a name="p128518294517"></a>actions</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p188519211459"><a name="p188519211459"></a><a name="p188519211459"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p78511026453"><a name="p78511026453"></a><a name="p78511026453"></a>Array of <a href="#table1685211284515">Action</a></p>
</td>
<td class="cellrowborder" valign="top" width="41.06%" headers="mcps1.2.6.1.4 "><p id="p118511923452"><a name="p118511923452"></a><a name="p118511923452"></a><span>定义action的json数组</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="22.58%" headers="mcps1.2.6.1.5 "><p id="p18851132144520"><a name="p18851132144520"></a><a name="p18851132144520"></a>当前只能支持1个Action。</p>
</td>
</tr>
<tr id="row385113215457"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p158511021451"><a name="p158511021451"></a><a name="p158511021451"></a>next_state</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p148526213459"><a name="p148526213459"></a><a name="p148526213459"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p6852192184513"><a name="p6852192184513"></a><a name="p6852192184513"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="41.06%" headers="mcps1.2.6.1.4 "><p id="p138521022455"><a name="p138521022455"></a><a name="p138521022455"></a><span>表示下一个state的名字，String类型，必须是图定义中存在的名字</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="22.58%" headers="mcps1.2.6.1.5 "><p id="p1185211284512"><a name="p1185211284512"></a><a name="p1185211284512"></a>必须是工作流中的state名字。</p>
</td>
</tr>
</tbody>
</table>

**表 5**  DelayState结构体参数说明

<a name="table68526211450"></a>
<table><thead align="left"><tr id="row168522217459"><th class="cellrowborder" valign="top" width="16.39%" id="mcps1.2.6.1.1"><p id="p68526218459"><a name="p68526218459"></a><a name="p68526218459"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="7.1499999999999995%" id="mcps1.2.6.1.2"><p id="p10852162104519"><a name="p10852162104519"></a><a name="p10852162104519"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.82%" id="mcps1.2.6.1.3"><p id="p188526218457"><a name="p188526218457"></a><a name="p188526218457"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="41.410000000000004%" id="mcps1.2.6.1.4"><p id="p138521329452"><a name="p138521329452"></a><a name="p138521329452"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="22.23%" id="mcps1.2.6.1.5"><p id="p58521024459"><a name="p58521024459"></a><a name="p58521024459"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row1985202164512"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p98529204513"><a name="p98529204513"></a><a name="p98529204513"></a>time_delay</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p885217214516"><a name="p885217214516"></a><a name="p885217214516"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p148528264515"><a name="p148528264515"></a><a name="p148528264515"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="41.410000000000004%" headers="mcps1.2.6.1.4 "><p id="p1785292134519"><a name="p1785292134519"></a><a name="p1785292134519"></a><span>等待的时间，单位秒，int类型。</span></p>
</td>
<td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.2.6.1.5 "><p id="p785215218458"><a name="p785215218458"></a><a name="p785215218458"></a><span>必须大于0，最大值为86400</span></p>
</td>
</tr>
<tr id="row18521212456"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p11852102184518"><a name="p11852102184518"></a><a name="p11852102184518"></a>next_state</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p785216284510"><a name="p785216284510"></a><a name="p785216284510"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p285211234517"><a name="p285211234517"></a><a name="p285211234517"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="41.410000000000004%" headers="mcps1.2.6.1.4 "><p id="p88521928455"><a name="p88521928455"></a><a name="p88521928455"></a><span>表示下一个state的名字，String类型，必须是图定义中存在的名字</span></p>
</td>
<td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.2.6.1.5 "><p id="p5852122204515"><a name="p5852122204515"></a><a name="p5852122204515"></a>必须是工作流模板中的state名字</p>
</td>
</tr>
</tbody>
</table>

**表 6**  Action结构体参数说明

<a name="table1685211284515"></a>
<table><thead align="left"><tr id="row485218254516"><th class="cellrowborder" valign="top" width="16.39%" id="mcps1.2.6.1.1"><p id="p178528224514"><a name="p178528224514"></a><a name="p178528224514"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="7.1499999999999995%" id="mcps1.2.6.1.2"><p id="p148528224511"><a name="p148528224511"></a><a name="p148528224511"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.82%" id="mcps1.2.6.1.3"><p id="p98527214453"><a name="p98527214453"></a><a name="p98527214453"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="32.26%" id="mcps1.2.6.1.4"><p id="p5852202174519"><a name="p5852202174519"></a><a name="p5852202174519"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="31.380000000000003%" id="mcps1.2.6.1.5"><p id="p885292174513"><a name="p885292174513"></a><a name="p885292174513"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row18524214453"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p1585292134515"><a name="p1585292134515"></a><a name="p1585292134515"></a><span>action_name</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p13852192104513"><a name="p13852192104513"></a><a name="p13852192104513"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p5852924455"><a name="p5852924455"></a><a name="p5852924455"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p685219218451"><a name="p685219218451"></a><a name="p685219218451"></a><span>action的名字</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p1185342124512"><a name="p1185342124512"></a><a name="p1185342124512"></a><span>要求state中唯一，action的名字是1-20长度的只含数字、字母、-和_的String。</span></p>
</td>
</tr>
<tr id="row2853132114513"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p2853202194516"><a name="p2853202194516"></a><a name="p2853202194516"></a>action_template_name</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p1785313215458"><a name="p1785313215458"></a><a name="p1785313215458"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p18531526455"><a name="p18531526455"></a><a name="p18531526455"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p78536217454"><a name="p78536217454"></a><a name="p78536217454"></a>action模板名，见<a href="#table11855202184517">内置Action模板名描述</a>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p118533217454"><a name="p118533217454"></a><a name="p118533217454"></a>-</p>
</td>
</tr>
<tr id="row98536294515"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p158539215458"><a name="p158539215458"></a><a name="p158539215458"></a>action_template_category</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p148531827454"><a name="p148531827454"></a><a name="p148531827454"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p1985319217456"><a name="p1985319217456"></a><a name="p1985319217456"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p15853721454"><a name="p15853721454"></a><a name="p15853721454"></a>action模板类别，见<a href="#table11855202184517">内置Action模板名描述</a>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p485311224513"><a name="p485311224513"></a><a name="p485311224513"></a>-</p>
</td>
</tr>
<tr id="row1985320210450"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p4853162124518"><a name="p4853162124518"></a><a name="p4853162124518"></a>action_template_provider_name</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p1785316216452"><a name="p1785316216452"></a><a name="p1785316216452"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p17853192134515"><a name="p17853192134515"></a><a name="p17853192134515"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p1985312284510"><a name="p1985312284510"></a><a name="p1985312284510"></a>action模板类别，见<a href="#table11855202184517">内置Action模板名描述</a>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p485316219451"><a name="p485316219451"></a><a name="p485316219451"></a>-</p>
</td>
</tr>
<tr id="row13853162114517"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p16853172144520"><a name="p16853172144520"></a><a name="p16853172144520"></a><span>function</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p198531123453"><a name="p198531123453"></a><a name="p198531123453"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p1185310219450"><a name="p1185310219450"></a><a name="p1185310219450"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p185313224515"><a name="p185313224515"></a><a name="p185313224515"></a>用户自定义函数URN。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p88531123453"><a name="p88531123453"></a><a name="p88531123453"></a>function与function_template只能设置其中一个。</p>
</td>
</tr>
<tr id="row5853523451"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p28536264514"><a name="p28536264514"></a><a name="p28536264514"></a>function_template</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p1385382184518"><a name="p1385382184518"></a><a name="p1385382184518"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p19853192164512"><a name="p19853192164512"></a><a name="p19853192164512"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p58536224516"><a name="p58536224516"></a><a name="p58536224516"></a>系统内置的函数模板URN。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p16853924458"><a name="p16853924458"></a><a name="p16853924458"></a>function与function_template只能设置其中一个。</p>
</td>
</tr>
<tr id="row98534214456"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p138536244511"><a name="p138536244511"></a><a name="p138536244511"></a><span>invocation_mode</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p1885313211459"><a name="p1885313211459"></a><a name="p1885313211459"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p1385310284516"><a name="p1385310284516"></a><a name="p1385310284516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p18538210457"><a name="p18538210457"></a><a name="p18538210457"></a><span>调用模式</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p385315213457"><a name="p385315213457"></a><a name="p385315213457"></a><span>值必须是“SYNC”</span>。</p>
</td>
</tr>
<tr id="row1185392184519"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p128531426452"><a name="p128531426452"></a><a name="p128531426452"></a><span>results</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p17853132144511"><a name="p17853132144511"></a><a name="p17853132144511"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p1585413284518"><a name="p1585413284518"></a><a name="p1585413284518"></a>Array of  <a href="#table108546254511">ActionResult</a></p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p68549219450"><a name="p68549219450"></a><a name="p68549219450"></a><span>Action失败后的捕获重试机制。</span></p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p9854132184520"><a name="p9854132184520"></a><a name="p9854132184520"></a><span>值是一个包含result定义的json数组，results若存在时，size</span><span>&gt;</span><span>=0</span>。</p>
</td>
</tr>
<tr id="row1285411214451"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p2085416264516"><a name="p2085416264516"></a><a name="p2085416264516"></a><span>timeout</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p5854429455"><a name="p5854429455"></a><a name="p5854429455"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p16854182164517"><a name="p16854182164517"></a><a name="p16854182164517"></a>Int</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p5854152124513"><a name="p5854152124513"></a><a name="p5854152124513"></a><span>Action的超时时间，最长等待时间。</span>默认值是30s。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p19854121453"><a name="p19854121453"></a><a name="p19854121453"></a><span>大于等于0且小于等于300的整型，等于0时等同于不设置。</span></p>
</td>
</tr>
<tr id="row185412204517"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p785462134511"><a name="p785462134511"></a><a name="p785462134511"></a><span>payload_filter</span></p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p158541244512"><a name="p158541244512"></a><a name="p158541244512"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p1585416204510"><a name="p1585416204510"></a><a name="p1585416204510"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p2854122164514"><a name="p2854122164514"></a><a name="p2854122164514"></a><span>对结果进行过滤的路径，默认是"$"</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p485422124511"><a name="p485422124511"></a><a name="p485422124511"></a>必须是合法的JSONPath格式。</p>
</td>
</tr>
<tr id="row128545215458"><td class="cellrowborder" valign="top" width="16.39%" headers="mcps1.2.6.1.1 "><p id="p68541222451"><a name="p68541222451"></a><a name="p68541222451"></a>dynamic_source</p>
</td>
<td class="cellrowborder" valign="top" width="7.1499999999999995%" headers="mcps1.2.6.1.2 "><p id="p78544210459"><a name="p78544210459"></a><a name="p78544210459"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.82%" headers="mcps1.2.6.1.3 "><p id="p8854202104517"><a name="p8854202104517"></a><a name="p8854202104517"></a>Map</p>
</td>
<td class="cellrowborder" valign="top" width="32.26%" headers="mcps1.2.6.1.4 "><p id="p198540219451"><a name="p198540219451"></a><a name="p198540219451"></a>在创建工作流时会根据OBS自定义的函数模板创建属于用户的function，并指定该参数设置的参数值。</p>
</td>
<td class="cellrowborder" valign="top" width="31.380000000000003%" headers="mcps1.2.6.1.5 "><p id="p28546211458"><a name="p28546211458"></a><a name="p28546211458"></a>必须是指定的参数名称，否则不生效。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  ActionResult结构体参数说明

<a name="table108546254511"></a>
<table><thead align="left"><tr id="row185420210459"><th class="cellrowborder" valign="top" width="16.43%" id="mcps1.2.6.1.1"><p id="p1885410244518"><a name="p1885410244518"></a><a name="p1885410244518"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="9.2%" id="mcps1.2.6.1.2"><p id="p108545224514"><a name="p108545224514"></a><a name="p108545224514"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="10.73%" id="mcps1.2.6.1.3"><p id="p1385462154516"><a name="p1385462154516"></a><a name="p1385462154516"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="29.94%" id="mcps1.2.6.1.4"><p id="p185416218453"><a name="p185416218453"></a><a name="p185416218453"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="33.7%" id="mcps1.2.6.1.5"><p id="p0854929452"><a name="p0854929452"></a><a name="p0854929452"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row58549284512"><td class="cellrowborder" valign="top" width="16.43%" headers="mcps1.2.6.1.1 "><p id="p158541721457"><a name="p158541721457"></a><a name="p158541721457"></a><span>match</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p14854227453"><a name="p14854227453"></a><a name="p14854227453"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="10.73%" headers="mcps1.2.6.1.3 "><p id="p08541725451"><a name="p08541725451"></a><a name="p08541725451"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="29.94%" headers="mcps1.2.6.1.4 "><p id="p48553254511"><a name="p48553254511"></a><a name="p48553254511"></a><span>表示匹配的错误</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="33.7%" headers="mcps1.2.6.1.5 "><p id="p485512114512"><a name="p485512114512"></a><a name="p485512114512"></a><span>MatchAny</span>、<span>States.ActionFailed、States.PermissionError、</span><span>States.ParameterError</span>、<span>States.NotFound</span>、<span>States.TooManyRequests</span>、<span>States.FunctionStageUnavailable</span>、<span>States.FunctionStageOtherErrors</span></p>
</td>
</tr>
<tr id="row13855927457"><td class="cellrowborder" valign="top" width="16.43%" headers="mcps1.2.6.1.1 "><p id="p19855192144520"><a name="p19855192144520"></a><a name="p19855192144520"></a><span>retry_interval</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p3855223455"><a name="p3855223455"></a><a name="p3855223455"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="10.73%" headers="mcps1.2.6.1.3 "><p id="p48551423451"><a name="p48551423451"></a><a name="p48551423451"></a>Int</p>
</td>
<td class="cellrowborder" valign="top" width="29.94%" headers="mcps1.2.6.1.4 "><p id="p128551225455"><a name="p128551225455"></a><a name="p128551225455"></a><span>表示重试的间隔时间，单位秒。</span></p>
<p id="p108555254518"><a name="p108555254518"></a><a name="p108555254518"></a>取值区间：[0, 86400]</p>
</td>
<td class="cellrowborder" valign="top" width="33.7%" headers="mcps1.2.6.1.5 "><p id="p1785510217453"><a name="p1785510217453"></a><a name="p1785510217453"></a><span>是</span><span>&gt;</span><span>=0的整型</span>。</p>
</td>
</tr>
<tr id="row1785562114510"><td class="cellrowborder" valign="top" width="16.43%" headers="mcps1.2.6.1.1 "><p id="p88559214518"><a name="p88559214518"></a><a name="p88559214518"></a><span>max_retry</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p168559219453"><a name="p168559219453"></a><a name="p168559219453"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="10.73%" headers="mcps1.2.6.1.3 "><p id="p1685512274519"><a name="p1685512274519"></a><a name="p1685512274519"></a>Int</p>
</td>
<td class="cellrowborder" valign="top" width="29.94%" headers="mcps1.2.6.1.4 "><p id="p98557204511"><a name="p98557204511"></a><a name="p98557204511"></a><span>表示最大重试次数</span>，<span>没有设置时默认为3</span>，<span>等于0时表示不重试。</span></p>
<p id="p1885517294512"><a name="p1885517294512"></a><a name="p1885517294512"></a>取值区间：[0, 10]</p>
</td>
<td class="cellrowborder" valign="top" width="33.7%" headers="mcps1.2.6.1.5 "><p id="p88551228451"><a name="p88551228451"></a><a name="p88551228451"></a><span>&gt;</span><span>=0的整型</span>。</p>
</td>
</tr>
<tr id="row14855125452"><td class="cellrowborder" valign="top" width="16.43%" headers="mcps1.2.6.1.1 "><p id="p1785516219450"><a name="p1785516219450"></a><a name="p1785516219450"></a><span>next_state</span></p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p178559214516"><a name="p178559214516"></a><a name="p178559214516"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="10.73%" headers="mcps1.2.6.1.3 "><p id="p1785522134516"><a name="p1785522134516"></a><a name="p1785522134516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="29.94%" headers="mcps1.2.6.1.4 "><p id="p17855142134515"><a name="p17855142134515"></a><a name="p17855142134515"></a><span>表示下一个state的名字，String类型，必须是图定义中存在的名字</span>。</p>
</td>
<td class="cellrowborder" valign="top" width="33.7%" headers="mcps1.2.6.1.5 "><p id="p185512274518"><a name="p185512274518"></a><a name="p185512274518"></a>必须是工作流模板中的state名字。</p>
</td>
</tr>
<tr id="row385572174514"><td class="cellrowborder" valign="top" width="16.43%" headers="mcps1.2.6.1.1 "><p id="p17855825457"><a name="p17855825457"></a><a name="p17855825457"></a>is_terminal</p>
</td>
<td class="cellrowborder" valign="top" width="9.2%" headers="mcps1.2.6.1.2 "><p id="p18855152174518"><a name="p18855152174518"></a><a name="p18855152174518"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="10.73%" headers="mcps1.2.6.1.3 "><p id="p1685502124517"><a name="p1685502124517"></a><a name="p1685502124517"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="29.94%" headers="mcps1.2.6.1.4 "><p id="p168556274518"><a name="p168556274518"></a><a name="p168556274518"></a><span>表示是否异常中断该Action</span>，默认为False。</p>
</td>
<td class="cellrowborder" valign="top" width="33.7%" headers="mcps1.2.6.1.5 "><p id="p2855123453"><a name="p2855123453"></a><a name="p2855123453"></a>注：如果设置为True，那么不必设置nex-state; 如果设置为False，则必须设置next-state。</p>
</td>
</tr>
</tbody>
</table>

**表 8**  内置Action模板名描述

<a name="table11855202184517"></a>
<table><thead align="left"><tr id="row1685610254511"><th class="cellrowborder" valign="top" width="17.49%" id="mcps1.2.6.1.1"><p id="p48569216453"><a name="p48569216453"></a><a name="p48569216453"></a>内置Action模板名</p>
</th>
<th class="cellrowborder" valign="top" width="16.259999999999998%" id="mcps1.2.6.1.2"><p id="p1785619212457"><a name="p1785619212457"></a><a name="p1785619212457"></a>描述</p>
</th>
<th class="cellrowborder" valign="top" width="22.09%" id="mcps1.2.6.1.3"><p id="p1085672204510"><a name="p1085672204510"></a><a name="p1085672204510"></a>Category（分类）</p>
</th>
<th class="cellrowborder" valign="top" width="30.55%" id="mcps1.2.6.1.4"><p id="p48560224515"><a name="p48560224515"></a><a name="p48560224515"></a>provider_name（提供商名称）</p>
</th>
<th class="cellrowborder" valign="top" width="13.61%" id="mcps1.2.6.1.5"><p id="p18856192144512"><a name="p18856192144512"></a><a name="p18856192144512"></a>分类描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row785616214456"><td class="cellrowborder" valign="top" width="17.49%" headers="mcps1.2.6.1.1 "><p id="p198566214453"><a name="p198566214453"></a><a name="p198566214453"></a>MediaTranscode</p>
</td>
<td class="cellrowborder" valign="top" width="16.259999999999998%" headers="mcps1.2.6.1.2 "><p id="p148569219458"><a name="p148569219458"></a><a name="p148569219458"></a>视频转码</p>
</td>
<td class="cellrowborder" valign="top" width="22.09%" headers="mcps1.2.6.1.3 "><p id="p885614218458"><a name="p885614218458"></a><a name="p885614218458"></a>MediaProcess</p>
</td>
<td class="cellrowborder" valign="top" width="30.55%" headers="mcps1.2.6.1.4 "><p id="p58562216455"><a name="p58562216455"></a><a name="p58562216455"></a>op_svc_obs</p>
</td>
<td class="cellrowborder" valign="top" width="13.61%" headers="mcps1.2.6.1.5 "><p id="p7856162174516"><a name="p7856162174516"></a><a name="p7856162174516"></a>视频处理</p>
</td>
</tr>
<tr id="row5856152134513"><td class="cellrowborder" valign="top" width="17.49%" headers="mcps1.2.6.1.1 "><p id="p11856172114511"><a name="p11856172114511"></a><a name="p11856172114511"></a>MediaRemux</p>
</td>
<td class="cellrowborder" valign="top" width="16.259999999999998%" headers="mcps1.2.6.1.2 "><p id="p10856142144512"><a name="p10856142144512"></a><a name="p10856142144512"></a>视频转封装</p>
</td>
<td class="cellrowborder" valign="top" width="22.09%" headers="mcps1.2.6.1.3 "><p id="p4856029457"><a name="p4856029457"></a><a name="p4856029457"></a>MediaProcess</p>
</td>
<td class="cellrowborder" valign="top" width="30.55%" headers="mcps1.2.6.1.4 "><p id="p0856112124514"><a name="p0856112124514"></a><a name="p0856112124514"></a>op_svc_obs</p>
</td>
<td class="cellrowborder" valign="top" width="13.61%" headers="mcps1.2.6.1.5 "><p id="p148567204513"><a name="p148567204513"></a><a name="p148567204513"></a>视频处理</p>
</td>
</tr>
<tr id="row1585611254517"><td class="cellrowborder" valign="top" width="17.49%" headers="mcps1.2.6.1.1 "><p id="p108567234516"><a name="p108567234516"></a><a name="p108567234516"></a>MediaMetadata</p>
</td>
<td class="cellrowborder" valign="top" width="16.259999999999998%" headers="mcps1.2.6.1.2 "><p id="p98569264513"><a name="p98569264513"></a><a name="p98569264513"></a>视频元信息</p>
</td>
<td class="cellrowborder" valign="top" width="22.09%" headers="mcps1.2.6.1.3 "><p id="p188561125450"><a name="p188561125450"></a><a name="p188561125450"></a>MediaProcess</p>
</td>
<td class="cellrowborder" valign="top" width="30.55%" headers="mcps1.2.6.1.4 "><p id="p1185642144514"><a name="p1185642144514"></a><a name="p1185642144514"></a>op_svc_obs</p>
</td>
<td class="cellrowborder" valign="top" width="13.61%" headers="mcps1.2.6.1.5 "><p id="p38562212452"><a name="p38562212452"></a><a name="p38562212452"></a>视频处理</p>
</td>
</tr>
<tr id="row1285672124514"><td class="cellrowborder" valign="top" width="17.49%" headers="mcps1.2.6.1.1 "><p id="p1985613284516"><a name="p1985613284516"></a><a name="p1985613284516"></a>MediaThumbnail</p>
</td>
<td class="cellrowborder" valign="top" width="16.259999999999998%" headers="mcps1.2.6.1.2 "><p id="p1885615244510"><a name="p1885615244510"></a><a name="p1885615244510"></a>视频截图</p>
</td>
<td class="cellrowborder" valign="top" width="22.09%" headers="mcps1.2.6.1.3 "><p id="p48563224519"><a name="p48563224519"></a><a name="p48563224519"></a>MediaProcess</p>
</td>
<td class="cellrowborder" valign="top" width="30.55%" headers="mcps1.2.6.1.4 "><p id="p108569214458"><a name="p108569214458"></a><a name="p108569214458"></a>op_svc_obs</p>
</td>
<td class="cellrowborder" valign="top" width="13.61%" headers="mcps1.2.6.1.5 "><p id="p08563219457"><a name="p08563219457"></a><a name="p08563219457"></a>视频处理</p>
</td>
</tr>
<tr id="row2856182154519"><td class="cellrowborder" valign="top" width="17.49%" headers="mcps1.2.6.1.1 "><p id="p58563204510"><a name="p58563204510"></a><a name="p58563204510"></a>NotificationSMN</p>
</td>
<td class="cellrowborder" valign="top" width="16.259999999999998%" headers="mcps1.2.6.1.2 "><p id="p985615220458"><a name="p985615220458"></a><a name="p985615220458"></a>SMN消息通知</p>
</td>
<td class="cellrowborder" valign="top" width="22.09%" headers="mcps1.2.6.1.3 "><p id="p13856823456"><a name="p13856823456"></a><a name="p13856823456"></a>NotificationProcess</p>
</td>
<td class="cellrowborder" valign="top" width="30.55%" headers="mcps1.2.6.1.4 "><p id="p48567213455"><a name="p48567213455"></a><a name="p48567213455"></a>op_svc_obs</p>
</td>
<td class="cellrowborder" valign="top" width="13.61%" headers="mcps1.2.6.1.5 "><p id="p1985613214510"><a name="p1985613214510"></a><a name="p1985613214510"></a>消息通知</p>
</td>
</tr>
</tbody>
</table>

**表 9**  Input结构体参数说明

<a name="table285619212450"></a>
<table><thead align="left"><tr id="row12857028452"><th class="cellrowborder" valign="top" width="15.340000000000002%" id="mcps1.2.6.1.1"><p id="p985716211457"><a name="p985716211457"></a><a name="p985716211457"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="7.85%" id="mcps1.2.6.1.2"><p id="p1085772184514"><a name="p1085772184514"></a><a name="p1085772184514"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="16.3%" id="mcps1.2.6.1.3"><p id="p178571628459"><a name="p178571628459"></a><a name="p178571628459"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="32%" id="mcps1.2.6.1.4"><p id="p15857172134513"><a name="p15857172134513"></a><a name="p15857172134513"></a>约束</p>
</th>
<th class="cellrowborder" valign="top" width="28.51%" id="mcps1.2.6.1.5"><p id="p1885715214457"><a name="p1885715214457"></a><a name="p1885715214457"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row88571525453"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p98575211451"><a name="p98575211451"></a><a name="p98575211451"></a>parameter_name</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p1185718284510"><a name="p1185718284510"></a><a name="p1185718284510"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p4857121453"><a name="p4857121453"></a><a name="p4857121453"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p1285719219456"><a name="p1285719219456"></a><a name="p1285719219456"></a>由小写字母、数字和中划线“-”组成，长度为[1, 20]。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p15857132144517"><a name="p15857132144517"></a><a name="p15857132144517"></a>输入参数名称。最多可定义60个，且命名必须唯一。</p>
</td>
</tr>
<tr id="row285717234512"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p128571926453"><a name="p128571926453"></a><a name="p128571926453"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p15857112174514"><a name="p15857112174514"></a><a name="p15857112174514"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><a name="ul128578254518"></a><a name="ul128578254518"></a><ul id="ul128578254518"><li>String：字符串</li><li>Integer：数字</li><li>Float：浮点数</li><li>Boolean：布尔值</li><li>List：列表</li><li>Map：集合</li></ul>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p138571524454"><a name="p138571524454"></a><a name="p138571524454"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p785713234513"><a name="p785713234513"></a><a name="p785713234513"></a>参数类型。</p>
</td>
</tr>
<tr id="row3764111311167"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p3764191371610"><a name="p3764191371610"></a><a name="p3764191371610"></a>value_type</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p187641013151610"><a name="p187641013151610"></a><a name="p187641013151610"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><a name="ul181617228167"></a><a name="ul181617228167"></a><ul id="ul181617228167"><li>String：字符串</li><li>Integer：数字</li><li>Float：浮点数</li></ul>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p576415133168"><a name="p576415133168"></a><a name="p576415133168"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p476471311611"><a name="p476471311611"></a><a name="p476471311611"></a>列表类型参数值类型。</p>
<p id="p208921755201610"><a name="p208921755201610"></a><a name="p208921755201610"></a>只支持原子类型</p>
</td>
</tr>
<tr id="row17857132174512"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p9857924455"><a name="p9857924455"></a><a name="p9857924455"></a>template_parameter_name</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p158576215458"><a name="p158576215458"></a><a name="p158576215458"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p68571028450"><a name="p68571028450"></a><a name="p68571028450"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p58571621454"><a name="p58571621454"></a><a name="p58571621454"></a>由小写字母、数字和中划线“-”组成，长度为[1, 20]。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p198578284515"><a name="p198578284515"></a><a name="p198578284515"></a>当多个同action template在一个工作流时，增加字段做国际化。</p>
</td>
</tr>
<tr id="row785742104511"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p198571220451"><a name="p198571220451"></a><a name="p198571220451"></a>paramter_value</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p68579211459"><a name="p68579211459"></a><a name="p68579211459"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p1485813214516"><a name="p1485813214516"></a><a name="p1485813214516"></a>根据类型传入的参数值</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p68589219454"><a name="p68589219454"></a><a name="p68589219454"></a>constraints定义的约束。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p88588224517"><a name="p88588224517"></a><a name="p88588224517"></a>参数值。</p>
</td>
</tr>
<tr id="row885813224513"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p158581027452"><a name="p158581027452"></a><a name="p158581027452"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p28586216459"><a name="p28586216459"></a><a name="p28586216459"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p12858172134516"><a name="p12858172134516"></a><a name="p12858172134516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p1685818214457"><a name="p1685818214457"></a><a name="p1685818214457"></a>长度为[0, 256]。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p1685815212456"><a name="p1685815212456"></a><a name="p1685815212456"></a>参数描述信息。</p>
</td>
</tr>
<tr id="row48587274517"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p12858123458"><a name="p12858123458"></a><a name="p12858123458"></a>default</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p158581126455"><a name="p158581126455"></a><a name="p158581126455"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p885802134513"><a name="p885802134513"></a><a name="p885802134513"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p148581424457"><a name="p148581424457"></a><a name="p148581424457"></a>默认值信息可在创建工作流实例时由外部输入替换；若未填写默认值，外部输入将必须填写这个参数的值。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p1185811224517"><a name="p1185811224517"></a><a name="p1185811224517"></a>默认值的类型和定义的参数类型必须统一。如果出现不一致，解析器可能会进行自动转换而导致出现与预期不符合的情况。</p>
</td>
</tr>
<tr id="row585819264511"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p13858622454"><a name="p13858622454"></a><a name="p13858622454"></a>label</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p985820214516"><a name="p985820214516"></a><a name="p985820214516"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p118581429451"><a name="p118581429451"></a><a name="p118581429451"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p1785852134520"><a name="p1785852134520"></a><a name="p1785852134520"></a>长度为[0, 64]。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p108585234518"><a name="p108585234518"></a><a name="p108585234518"></a>参数的标签，此处定义的标签可在创建堆栈时进行分类展示。</p>
</td>
</tr>
<tr id="row98581622455"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p885812218456"><a name="p885812218456"></a><a name="p885812218456"></a>constraints</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p78587213456"><a name="p78587213456"></a><a name="p78587213456"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p108582219458"><a name="p108582219458"></a><a name="p108582219458"></a>Map</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p192821730164210"><a name="p192821730164210"></a><a name="p192821730164210"></a><span>约束条件有以下几种，一个输入参数对每一种条件都只能定义一个规则。约束的多个条件中只要有一条不满足，即将认定参数非法。</span></p>
<a name="ul0282103010422"></a><a name="ul0282103010422"></a><ul id="ul0282103010422"><li>equal：约定参数的value值必须等于特定值。</li><li>valid_values：参数的有效值，定义一个数组。</li><li>regex：参数需要满足某个正则条件，必须是字符串类型才可以进行匹配。</li><li>invalid_values：参数的无效值范围，如果参数值定义在其中，将会认为无效而报错。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p1685872144515"><a name="p1685872144515"></a><a name="p1685872144515"></a>参数约束，用于约束可以定义输入参数的合法值范围。</p>
<p id="p15282113020423"><a name="p15282113020423"></a><a name="p15282113020423"></a>例如：当输入参数不等于obs时，则会认定参数非法。</p>
<pre class="screen" id="screen345514854313"><a name="screen345514854313"></a><a name="screen345514854313"></a>"constraints": {
     "equal": "obs"
}</pre>
<p id="p20547259117"><a name="p20547259117"></a><a name="p20547259117"></a>例如：输出参数值可以从TCP、UDP中选取一个。</p>
<pre class="screen" id="screen103299314118"><a name="screen103299314118"></a><a name="screen103299314118"></a>"constraints": {
     "<span>valid_values</span>": <span>["TCP", "UDP" ]</span>
}</pre>
<p id="p9576153531118"><a name="p9576153531118"></a><a name="p9576153531118"></a>例如：当输入参数不满足正则条件时，则会认定参数非法。</p>
<pre class="screen" id="screen5929164319120"><a name="screen5929164319120"></a><a name="screen5929164319120"></a>"constraints": {
     "<span>valid_values</span>": <span>["TCP", "UDP" ]</span>
}</pre>
<p id="p446714214113"><a name="p446714214113"></a><a name="p446714214113"></a>例如：当输入参数为1或12时，则会认定参数非法。</p>
<pre class="screen" id="screen1259955910110"><a name="screen1259955910110"></a><a name="screen1259955910110"></a>"constraints": {
     "<span>invalid_values</span>": <span>["1", "12" ]</span>
}</pre>
</td>
</tr>
<tr id="row885811211451"><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.2.6.1.1 "><p id="p58586219459"><a name="p58586219459"></a><a name="p58586219459"></a>invisible</p>
</td>
<td class="cellrowborder" valign="top" width="7.85%" headers="mcps1.2.6.1.2 "><p id="p785862204514"><a name="p785862204514"></a><a name="p785862204514"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="16.3%" headers="mcps1.2.6.1.3 "><p id="p1885814274511"><a name="p1885814274511"></a><a name="p1885814274511"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.6.1.4 "><p id="p485810234514"><a name="p485810234514"></a><a name="p485810234514"></a>输入参数的invisible设置为true时，返回值为******。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="p1185872194516"><a name="p1185872194516"></a><a name="p1185872194516"></a>查询是否回显。</p>
</td>
</tr>
</tbody>
</table>

## 响应消息样式<a name="section920694152946"></a>

```
HTTP/1.1 status_code 
Date: date 
Content-Length: length 
X-Request-ID: obs request id

json body
```

## 响应消息头<a name="section8877856"></a>

该请求的响应消息使用公共消息头，具体请参考[表1](返回结果.md#d0e686)。

## 响应消息元素<a name="section12791844"></a>

<a name="table6565174183715"></a>
<table><thead align="left"><tr id="row8565641203714"><th class="cellrowborder" valign="top" width="23.17231723172317%" id="mcps1.1.4.1.1"><p id="p2565134118375"><a name="p2565134118375"></a><a name="p2565134118375"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="28.332833283328334%" id="mcps1.1.4.1.2"><p id="p65661416370"><a name="p65661416370"></a><a name="p65661416370"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="48.494849484948496%" id="mcps1.1.4.1.3"><p id="p156616412371"><a name="p156616412371"></a><a name="p156616412371"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row92050370515"><td class="cellrowborder" valign="top" width="23.17231723172317%" headers="mcps1.1.4.1.1 "><p id="p149659434518"><a name="p149659434518"></a><a name="p149659434518"></a>graph_name</p>
</td>
<td class="cellrowborder" valign="top" width="28.332833283328334%" headers="mcps1.1.4.1.2 "><p id="p496512431754"><a name="p496512431754"></a><a name="p496512431754"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.494849484948496%" headers="mcps1.1.4.1.3 "><p id="p1696517435515"><a name="p1696517435515"></a><a name="p1696517435515"></a>工作流名称。</p>
</td>
</tr>
<tr id="row115661341153710"><td class="cellrowborder" valign="top" width="23.17231723172317%" headers="mcps1.1.4.1.1 "><p id="p1113721318564"><a name="p1113721318564"></a><a name="p1113721318564"></a>graph_urn</p>
</td>
<td class="cellrowborder" valign="top" width="28.332833283328334%" headers="mcps1.1.4.1.2 "><p id="p31378134562"><a name="p31378134562"></a><a name="p31378134562"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.494849484948496%" headers="mcps1.1.4.1.3 "><p id="p111371113195616"><a name="p111371113195616"></a><a name="p111371113195616"></a>工作流的URN。</p>
</td>
</tr>
<tr id="row675617465614"><td class="cellrowborder" valign="top" width="23.17231723172317%" headers="mcps1.1.4.1.1 "><p id="p713741335613"><a name="p713741335613"></a><a name="p713741335613"></a>created_at</p>
</td>
<td class="cellrowborder" valign="top" width="28.332833283328334%" headers="mcps1.1.4.1.2 "><p id="p14137161319563"><a name="p14137161319563"></a><a name="p14137161319563"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.494849484948496%" headers="mcps1.1.4.1.3 "><p id="p19137111345612"><a name="p19137111345612"></a><a name="p19137111345612"></a>工作流创建的时间。</p>
</td>
</tr>
</tbody>
</table>

## 错误响应消息<a name="section48017739"></a>

无特殊错误，所有错误已经包含在[表2](错误码.md#d0e843)中。

## 请求示例<a name="section14482163815396"></a>

```
POST /v2/workflows/{graph_name}?x-workflow-create HTTP/1.1
Host: obs.cn-north-4.myhuaweicloud.com 
Date: Thu, 27 Aug 2020 12:38:10 GMT
Authorization: OBS H4IPJX0TQTHTHEBQQCEC:sc2PM13Wlfcoc/YZLK0MwsI2Zpo=
Content-Type: application/json
Content-Length: 100

{
    "description": "a demo of graph",
    "inputs": [{
        "parameter_name": "param1",
        "default": "TCP",
        "parameter_value": "TCP",
        "template_parameter_name": "param",
        "type": "string",
        "label": "action1",
        "constraints": {
            "valid_values": ["TCP", "UDP"]
        },
        "invisible": true,
        "description": "description param1"
    }],
    "states": [{
        "start": true,
        "state_name": "operation",
        "payload_filter_in": "$",
        "payload_filter_out": "$",
        "type": "OPERATION",
        "action_mode": "SEQUENTIAL",
        "actions": [{
            "action_name": "action1",
            "action_template_name": "<Action Template name>",
            "action_template_category": "<Action Template category>",
            "action_template_provider_name": "<Action Template provider name>",
            "function_template": "urn:fss:cn-north-5:3f1e6caf808246c68457e660e4bfeb2f:function:default:test",
            "invocation_mode": "SYNC",
            "timeout": 0,
            "payload_filter": "$",
            "dynamic_source": {
                "param1": {
                    "get_input": "$.inputs.param1"
                },
                "param2": {
                    "get_input": "$.inputs.param2"
                }
            }
        }],
        "next_state": "end"
    }, {
        "state_name": "end",
        "type": "END"
    }]
}
```

## 响应示例<a name="section76081155815"></a>

```
HTTP/1.1 201 Created
Server: OBS
Date: Thu, 27 Aug 2020 12:38:10 GMT
Content-Length: 100
X-Request-ID: 000001742FE8FB3CCA20173B00807C43

{
    "graph_name": "test-graph",
    "graph_urn": "urn:obs:cn-north-5:3f1e6caf808246c68457e660e4bfeb2f:graph:test-graph",
    "created_at": "2020-04-23T12:32:11.131Z"
}
```

