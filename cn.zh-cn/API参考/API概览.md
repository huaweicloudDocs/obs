# API概览<a name="obs_04_0005"></a>

## 桶基础操作接口<a name="section23599591419"></a>

**表 1**  桶基础操作接口

|接口|说明|
|--|--|
|获取桶列表|查询自己创建的桶列表。|
|创建桶|创建一个新桶。可以在创建时添加不同的请求消息头来指定桶的区域、权限控制策略、存储类型等信息。|
|列举桶内对象|获取桶内对象列表。可以在创建时添加不同的请求消息头来获取符合指定前缀、标识符等要求的对象。|
|获取桶元数据|查询桶元数据是否存在。可以查询桶的区域、存储类型、OBS服务版本号、企业项目id、CORS配置等信息。|
|获取桶区域位置|获取桶区域位置信息。|
|删除桶|删除指定的桶。删除之前需要确保桶内无对象。|


## 桶高级配置接口<a name="section222510319219"></a>

**表 2**  桶高级配置接口

|接口|说明|
|--|--|
|设置桶策略|创建或者修改一个桶的策略。如果桶已经存在一个策略，那么当前请求中的策略将完全覆盖桶中现存的策略。|
|获取桶策略|获取指定桶的策略信息。|
|删除桶策略|删除一个指定桶上的策略。|
|设置桶ACL|设置一个指定桶的ACL信息。通过ACL可以控制桶的读写权限。|
|获取桶ACL|获取一个指定桶的ACL信息。|
|设置桶日志管理配置|开启或关闭桶的日志管理功能。开启后，桶的每次操作将会产生一条日志，并将多条日志打包成一个日志文件存放在指定的位置。|
|获取桶日志管理配置|获取指定桶的日志管理配置信息。|
|设置桶的生命周期配置|指定规则来实现定时删除或迁移桶中对象。|
|获取桶的生命周期配置|获取指定桶已配置的生命周期规则。|
|删除桶的生命周期配置|删除指定桶的生命周期配置信息。|
|设置桶的多版本状态|开启或暂停桶的多版本功能。开启后，可以检索和还原各个版本的对象，在意外操作或应用程序故障时快速恢复数据。|
|获取桶的多版本状态|获取指定桶的多版本功能状态。|
|设置桶的消息通知配置|设置桶的消息通知功能，安全、及时的了解发生在桶上的关键事件。|
|获取桶的消息通知配置|获取指定桶的消息通知配置信息。|
|设置桶默认存储类型|创建或更新桶的默认存储类型配置信息。|
|获取桶默认存储类型|获取桶的默认存储类型配置信息。|
|设置桶的跨区域复制配置|设置桶的跨区域复制功能。通过激活跨区域复制，OBS可将新创建的对象及修改的对象从一个源桶复制到不同区域中的目标桶。|
|获取桶的跨区域复制配置|获取指定桶的跨区域复制配置信息。|
|删除桶的跨区域复制配置|删除指定桶的跨区域复制配置信息。|
|设置桶标签|添加标签至一个已存在的桶。为桶添加标签后，该桶上所有请求产生的计费话单里都会带上这些标签，从而可以针对话单报表做分类筛选，进行更详细的成本分析。|
|获取桶标签|获取指定桶的标签。|
|删除桶标签|删除指定桶的标签。|
|设置桶配额|设置桶的空间配额，用以限制桶的最大存储容量。|
|获取桶配额|获取桶的空间配额。|
|获取桶存量信息|获取桶中的对象个数及对象占用空间。|
|设置桶清单|为一个桶配置清单规则。桶清单可以用来帮助您管理桶内对象，它可以定期列举桶内对象，并将对象元数据的相关信息保存在CSV格式的文件中，上传到您指定的桶中。|
|获取桶清单|获取指定桶的某个清单规则。|
|列举桶清单|获取指定桶的所有清单规则。|
|删除桶清单|删除指定桶的某个清单规则。|
|设置桶的自定义域名|为桶设置自定义域名。设置成功之后，用户可以通过桶的自定义域名访问桶。|
|获取桶的自定义域名|查询桶已设置的自定义域名。|
|删除桶的自定义域名|删除桶已设置的自定义域名。|
|设置桶的加密配置|为桶创建或更新默认服务端加密配置信息。设置桶加密配置后，在该桶中上传对象时，会采用桶的默认加密配置对数据进行加密。|
|获取桶的加密配置|查询桶的默认服务端加密配置信息。|
|删除桶的加密配置|删除桶的默认服务端加密配置信息。|
|设置桶归档对象直读策略|开启或关闭桶的归档对象直读功能。开启后，归档对象不需要恢复便可以直接下载。|
|获取桶归档对象直读策略|获取指定桶的归档对象直读状态。|
|删除桶归档对象直读策略|删除指定桶的归档对象直读配置信息。|
|设置镜像回源规则|设置指定桶的镜像回源规则。|
|获取镜像回源规则|获取指定桶的镜像回源规则。|
|删除镜像回源规则|删除指定桶的镜像回源规则。|
|设置DIS通知策略|设置指定桶的DIS通知策略。|
|获取DIS通知策略|获取指定桶的DIS通知策略。|
|删除DIS通知策略|删除指定桶的DIS通知策略。|
|设置在线解压策略|设置指定桶的ZIP文件解压规则。|
|获取在线解压策略|获取指定桶的ZIP文件解压规则。|
|删除在线解压策略|删除指定桶的ZIP文件解压规则。|
|配置桶级默认WORM策略|桶的WORM开关开启后，支持配置默认保护策略和保护期限。|
|获取桶级默认WORM策略|获取指定桶设置的桶级默认WORM策略。|


## 静态网站托管接口<a name="section13506949424"></a>

**表 3**  静态网站托管接口

|接口|说明|
|--|--|
|设置桶的网站配置|创建或更新桶的网站配置信息。OBS允许在桶内保存静态的网页资源，如.html网页文件、flash文件、音视频文件等，当客户端通过桶的Website接入点访问这些对象资源时，浏览器可以直接解析出这些支持的网页资源，呈现给最终用户。|
|获取桶的网站配置|获取桶的网站配置信息。|
|删除桶的网站配置|删除桶的网站配置信息。|
|设置桶的CORS配置|设置桶的跨域资源共享配置信息。OBS允许在桶内保存静态的网页资源，在正确的使用下，OBS的桶可以成为网站资源。只有进行了适当的CORS配置，OBS中的网站才能响应另一个网站的跨域请求。|
|获取桶的CORS配置|获取桶的跨域资源共享配置信息。|
|删除桶的CORS配置|删除桶的跨域资源共享配置信息。|
|OPTIONS桶|检测客户端是否具有对服务端进行操作的权限。通常用于跨域访问之前。|
|OPTIONS对象|检测客户端是否具有对服务端进行操作的权限。通常用于跨域访问之前。|


## 对象操作接口<a name="section17527191838"></a>

**表 4**  对象操作接口

|接口|说明|
|--|--|
|PUT上传|上传简单对象到指定的桶。|
|POST上传|基于表单上传对象到指定的桶。|
|复制对象|为OBS上已经存在的对象创建一个副本。|
|下载对象|下载对象。|
|获取对象元数据|获取对象的元数据信息。包括对象的过期时间、版本号、CORS配置等信息。|
|删除对象|删除指定的对象。也可以携带versionId删除指定版本的对象。|
|批量删除对象|将一个桶内的一部分对象一次性删除，删除后不可恢复。|
|恢复归档或深度归档存储对象|将归档和深度归档（受限公测）存储对象的内容恢复，恢复后才能下载。|
|追加写对象|在指定桶内的一个对象尾追加上传数据，不存在相同对象键值的对象则创建新对象。|
|设置对象ACL|设置一个指定对象的ACL信息。通过ACL可以控制对象的读写权限。|
|获取对象ACL|获取一个指定对象的ACL信息。|
|修改对象元数据|添加、修改或删除桶中已经上传的对象的元数据。|
|修改写对象|将指定并行文件系统内的一个对象从指定位置起修改为其他内容。|
|截断对象|将指定并行文件系统内的一个对象截断到指定大小。|
|重命名对象|将指定并行文件系统内的一个对象重命名为其他对象名。|
|回调|用户可以在上传对象请求中设置回调参数，OBS在对象上传成功之后，将上传结果回调特定服务器，并将回调结果返回给用户。|
|配置对象级WORM保护策略|开启了WORM开关的桶，上传的对象支持配置或修改对象保护期限。|


## 多段操作接口<a name="section34583211319"></a>

**表 5**  多段操作接口

|接口|说明|
|--|--|
|列举桶中已初始化多段任务|查询一个桶中所有的初始化后还未合并以及未取消的多段上传任务。|
|初始化上传段任务|使用多段上传特性时，必须首先调用此接口初始化上传段任务，获取全局唯一的多段上传任务号，用于后续的上传段、合并段、列举段等操作。|
|上传段|为特定的任务上传段。|
|拷贝段|将已上传对象的一部分或全部拷贝为段。|
|列举已上传的段|查询一个任务所属的所有段信息。|
|合并段|将指定的段合并成一个完整的对象。|
|取消多段上传任务|取消一个多段上传的任务。|


## Data+接口<a name="section436942617615"></a>

**表 6**  Data+接口

|接口|说明|
|--|--|
|创建工作流|本接口用于直接创建Data+工作流。|
|查询工作流详情|本接口用于根据工作流名称查询工作流详细信息。|
|删除工作流|本接口用于标记删除工作流。|
|更新工作流|本接口用于更新工作流参数值。|
|查询工作流列表|本接口用于查询工作流列表。|
|API异步启动工作流|本接口用于API方式异步启动已有工作流，产生工作流实例。|
|查询工作流实例列表|本接口用于查询用户工作流的实例列表。|
|查询工作流实例|本接口用于查询指定工作流实例详细。|
|恢复失败状态的工作流实例|本接口用于恢复一个执行失败状态的工作流实例。恢复后，工作流实例将从上次失败的状态处继续执行，而工作流步骤中已经执行成功的状态不会再执行。|
|开通授权|本接口用于开通授权，由OBS服务自动帮助用户创建工作流运行时需要的函数服务权限，以及函数服务运行时的权限。|
|查询授权|本接口用于查询授权，查询由OBS服务自动帮助用户创建工作流运行时需要的函数服务权限，以及函数服务运行时的权限。|
|查询华为云算子模板详情|本接口用于按名称查询Action模板。|
|查询华为云算子模板列表|本接口用于查询已有预置Action模板列表。|
|配置桶触发器|本接口用于在桶上绑定工作流触发器。|
|查询桶触发器|本接口用于查询桶上绑定工作流触发器。|
|删除桶触发器|本接口用于删除在桶上绑定工作流触发器。|


